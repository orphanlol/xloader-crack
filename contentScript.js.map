{"version":3,"file":"contentScript.js","mappings":"AA4DKA,OAAOC,mBACXD,OAAOC,kBAAmB,EAC1BC,YArDDC,iBACC,IACC,MAAMC,QAAgBC,MAAMC,OAAOC,QAAQC,OAAO,gBAAgBC,MAChEC,GAAaA,EAASC,SAElBC,EAAY,CACjBR,EAAQS,MAAM,wBAAwB,GACtCT,EAAQS,MAAM,cAAc,IAsBvBC,EApBU,CACf,CACC,sBACA,qOACCF,EAAU,gIAEVR,EAAQS,MACP,6DACG,gHAEJD,EAAU,kKAEVA,EAAU,4VAGZ,CACC,wBACA,4GAG8BG,QAC/B,CAACX,GAAUY,EAAOC,KAAWb,EAAQc,QAAQF,EAAOC,IACpDb,GAEKe,QAAyBd,MAC9BC,OAAOC,QAAQC,OAAO,wBACrBC,MAAMC,GAAaA,EAASC,SAE9BS,SAASC,gBAAgBC,aACxB,UACA,GAAGR,yCAAuDK,IAAmBI,WAC5E,UACA,mBAGFH,SAASC,gBAAgBG,cAAc,IAAIC,YAAY,UACvDL,SAASC,gBAAgBK,gBAAgB,WACxC,MAAOC,GACRC,MAAM,wBAA0BD,EAAEE,YAMZ,KACvBC,QAAQC,MAAM,qBACd,IACIX,SAASY,qBAAqB,aAC9BZ,SAASY,qBAAqB,SAChCC,SAASC,IACNA,EAAEC,YACLL,QAAQM,IAAIF,EAAEC,WACdD,EAAER,gBAAgB,iBAGpBI,QAAQO","sources":["webpack://prodigy-x-loader/./src/contentScript.js"],"sourcesContent":["const cheatMenuUrl = {\r\n\tget: async () =>\r\n\t\t(await chrome.storage.sync.get(\"cheat-menu-url\"))[\"cheat-menu-url\"],\r\n\tset: (url) =>\r\n\t\tchrome.storage.sync.set({\r\n\t\t\t\"cheat-menu-url\": url,\r\n\t\t}),\r\n};\r\n\r\nasync function insertCode() {\r\n\ttry {\r\n\t\tconst request = await fetch(chrome.runtime.getURL(\"game.min.js\")).then(\r\n\t\t\t(response) => response.text()\r\n\t\t);\r\n\t\tconst variables = [\r\n\t\t\trequest.match(/window,function\\((.)/)[1],\r\n\t\t\trequest.match(/var (.)={}/)[1],\r\n\t\t];\r\n\t\tconst patches = [\r\n\t\t\t[\r\n\t\t\t\t/s\\),this\\._game=(.)/,\r\n\t\t\t\t`s),this._game=$1;window.priorLodash = window._;Object.defineProperty(window.priorLodash, \"game\", {get: () => this._game, enumerable: true, configurable: true});Object.defineProperty(window.priorLodash, \"instance\", {get: () => ${\r\n\t\t\t\t\tvariables[0]\r\n\t\t\t\t}.instance, enumerable: true, configurable: true});Object.defineProperty(window.priorLodash, \"player\", {get: () => window._.${\r\n\t\t\t\t\trequest.match(\r\n\t\t\t\t\t\t/instance.prodigy.gameContainer.get\\(\"...-....\"\\).player/\r\n\t\t\t\t\t)?.[0]\r\n\t\t\t\t}, enumerable: true, configurable: true});Object.defineProperty(window.priorLodash, \"gameData\", {get: () => ${\r\n\t\t\t\t\tvariables[0]\r\n\t\t\t\t}.instance.game.state.states.get(\"Boot\")._gameData, enumerable: true, configurable: true});Object.defineProperty(window.priorLodash, \"localizer\", {get: () => ${\r\n\t\t\t\t\tvariables[0]\r\n\t\t\t\t}.instance.prodigy.gameContainer.get(\"LocalizationService\"), enumerable: true, configurable: true});Object.defineProperty(window.priorLodash, \"network\", {get: () => window._.player.game.input.onDown._bindings[0].context, enumerable: true, configurable: true});setInterval(() => {if(window.priorLodash!==window._){window._=priorLodash;}}, 100);`,\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t/(.)\\.constants=Object/,\r\n\t\t\t\t\"window.priorLodash = window.priorLodash || window._,window.priorLodash.constants=$1,$1.constants=Object\",\r\n\t\t\t],\r\n\t\t];\r\n\t\tconst patchedGameFile = patches.reduce(\r\n\t\t\t(request, [regex, patch]) => request.replace(regex, patch),\r\n\t\t\trequest\r\n\t\t);\r\n\t\tconst cheatMenuRequest = await fetch(\r\n\t\t\tchrome.runtime.getURL(\"extension-bundle.js\")\r\n\t\t).then((response) => response.text());\r\n\r\n\t\tdocument.documentElement.setAttribute(\r\n\t\t\t\"onreset\",\r\n\t\t\t`${patchedGameFile}\\nSW.Load.decrementLoadSemaphore();\\n${cheatMenuRequest}`.replaceAll(\r\n\t\t\t\t\"new URL\",\r\n\t\t\t\t\"new window.URL\"\r\n\t\t\t)\r\n\t\t);\r\n\t\tdocument.documentElement.dispatchEvent(new CustomEvent(\"reset\"));\r\n\t\tdocument.documentElement.removeAttribute(\"onreset\");\r\n\t} catch (e) {\r\n\t\talert(\"Failed to load hack\\n\" + e.message);\r\n\t}\r\n}\r\n\r\nif (!window.scriptIsInjected) {\r\n\twindow.scriptIsInjected = true;\r\n\tsetTimeout(insertCode, 1000);\r\n\tconsole.group(\"integrity patches\");\r\n\t[\r\n\t\t...document.getElementsByTagName(\"script\"),\r\n\t\t...document.getElementsByTagName(\"link\"),\r\n\t].forEach((v) => {\r\n\t\tif (v.integrity) {\r\n\t\t\tconsole.log(v.integrity);\r\n\t\t\tv.removeAttribute(\"integrity\");\r\n\t\t}\r\n\t});\r\n\tconsole.groupEnd();\r\n}\r\n"],"names":["window","scriptIsInjected","setTimeout","async","request","fetch","chrome","runtime","getURL","then","response","text","variables","match","patchedGameFile","reduce","regex","patch","replace","cheatMenuRequest","document","documentElement","setAttribute","replaceAll","dispatchEvent","CustomEvent","removeAttribute","e","alert","message","console","group","getElementsByTagName","forEach","v","integrity","log","groupEnd"],"sourceRoot":""}